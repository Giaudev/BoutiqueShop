<!DOCTYPE html>
<html
  lang="en"
  xmlns:th="http://www.thymeleaf.org"
  xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
  layout:decorate="~{admin/dashboard.html}"
>
  <head>
    <title>Title</title>
    <!-- Required meta tags -->
    <meta charset="utf-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, shrink-to-fit=no"
    />

    <!-- Bootstrap CSS v5.2.1 -->
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN"
      crossorigin="anonymous"
    />
  </head>

  <body>
    <div class="container" layout:fragment="content">
      <div class="row">
        <div class="col-lg-12">
          <div class="card">
            <div class="card-header">
              <h2>
                <span th:if="${!product.isEdit}">Add</span>
                <span th:if="${product.isEdit}">Update</span>
                New Product
              </h2>
            </div>
            <div class="card-body">
              <form
                th:action="@{/admin/products/saveOrUpdate}"
                th:object="${product}"
                method="post"
                enctype="multipart/form-data"
              >
                <div class="mb-3 form-group">
                  <label for="productid" class="form-label">Product ID:</label>
                  <input type="hidden" th:field="*{isEdit}" />
                  <input
                    th:field="*{productId}"
                    type="text"
                    class="form-control"
                    id="productid"
                    aria-describedby="helpId"
                    placeholder="please enter your CategoryID..."
                    readonly
                  />
                  <small
                    th:if="${#fields.hasErrors('productId')}"
                    class="text-muted form-text"
                    >ProductID is required</small
                  >
                </div>
                <div class="mb-3 form-group">
                  <label for="productName" class="form-label"
                    >Product Name:</label
                  >
                  <input
                    th:field="*{name}"
                    type="text"
                    class="form-control"
                    id="productName"
                    aria-describedby="helpId"
                    placeholder="please enter your Product Name..."
                  />
                  <small
                    th:if="${#fields.hasErrors('name')}"
                    class="text-muted form-text"
                    >Name is required or Invalid</small
                  >
                </div>

                <div class="row">
                  <div class="col-lg-6">
                    <div class="mb-3 form-group">
                      <label for="price" class="form-label">Price:</label>
                      <input
                        th:field="*{price}"
                        type="text"
                        class="form-control"
                        id="price"
                        aria-describedby="helpId"
                        placeholder="please enter your Price..."
                      />
                      <small
                        th:if="${#fields.hasErrors('price')}"
                        class="text-muted form-text"
                        >Price is required or Invalid</small
                      >
                    </div>
                  </div>
                  <div class="col-lg-6">
                    <div class="mb-3 form-group">
                      <label for="quantity" class="form-label">Quantity:</label>
                      <input
                        th:field="*{quantity}"
                        type="number"
                        class="form-control"
                        id="quantity"
                        aria-describedby="helpId"
                        placeholder="please enter your Quantity..."
                      />
                      <small
                        th:if="${#fields.hasErrors('quantity')}"
                        class="text-muted form-text"
                        >Quantity is required or Invalid</small
                      >
                    </div>
                  </div>

                  <div class="col-lg-6">
                    <div class="mb-3 form-group">
                      <label for="imageFile" class="form-label"
                        >Upload Image:</label
                      >
                      <input type="hidden" th:field="*{image}" />
                      <div class="d-flex align-items-center gap-2">
                        <input
                          th:field="*{imageFile}"
                          type="file"
                          class="form-control"
                          id="imageFile"
                        />
                        <div th:if="${product.image != null}">
                          <img
                            th:src="@{'/uploads/' +${product.image}}"
                            alt=""
                            style="max-width: 100px; max-height: 50px"
                            class="img-fluid"
                          />
                        </div>
                      </div>
                      <small
                        th:if="${#fields.hasErrors('image')}"
                        class="text-muted form-text"
                      >
                        Image is required or Invalid
                      </small>
                    </div>
                  </div>

                  <div class="col-lg-6">
                    <div class="mb-3 form-group">
                      <label for="discount" class="form-label">Discount:</label>
                      <input
                        th:field="*{discount}"
                        type="text"
                        class="form-control"
                        id="discount"
                        aria-describedby="helpId"
                        placeholder="please enter your discount VD:0.1 ..."
                      />
                      <small
                        th:if="${#fields.hasErrors('discount')}"
                        class="text-muted form-text"
                        >Discount is required or Invalid</small
                      >
                    </div>
                  </div>

                  <div class="col-lg-6">
                    <div class="mb-3 form-group">
                      <label for="description" class="form-label"
                        >Description:</label
                      >
                      <textarea
                        th:field="*{description}"
                        class="form-control"
                        id="description"
                        placeholder="please enter your description ..."
                        rows="3"
                      ></textarea>
                      <small
                        th:if="${#fields.hasErrors('description')}"
                        class="text-muted form-text"
                        >description is required or Invalid</small
                      >
                    </div>
                  </div>

                  <div class="col-lg-6">
                    <div class="mb-3 form-group">
                      <label for="categoryId" class="form-label"
                        >category:</label
                      >
                      <select
                        name=""
                        id="categoryId"
                        th:field="*{categoryId}"
                        class="form-control"
                      >
                        <option
                          value=""
                          th:selected="${product.categoryId == null}"
                          th:disabled="${product.categoryId != null}"
                        >
                          Select a Category
                        </option>
                        <option
                          th:each="category : ${categories}"
                          th:text="${category.name}"
                          th:value="${category.categoryId}"
                          th:selected="${category.categoryId == product.categoryId}"
                        ></option>
                      </select>
                      <small
                        th:if="${#fields.hasErrors('categoryId')}"
                        class="text-muted form-text"
                        >category is required or Invalid</small
                      >
                    </div>
                  </div>
                </div>
                <div class="card-footer text-muted">
                  <button type="reset" class="btn btn-secondary">Reset</button>
                  <a th:href="@{/admin/products}" class="btn btn-success"
                    >List Product</a
                  >
                  <button type="submit" class="btn btn-primary">
                    <span th:if="${product.isEdit}">Update</span>
                    <span th:unless="${product.isEdit}">Save</span>
                  </button>
                </div>
              </form>
            </div>
          </div>
        </div>
      </div>
    </div>

    <script
      src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.8/dist/umd/popper.min.js"
      integrity="sha384-I7E8VVD/ismYTF4hNIPjVp/Zjvgyol6VFvRkX/vR+Vc4jQkC+hVqc2pM8ODewa9r"
      crossorigin="anonymous"
    ></script>

    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.min.js"
      integrity="sha384-BBtl+eGJRgqQAUMxJ7pMwbEyER4l1g+O15P+16Ep7Q9Q+zqX6gSbd85u4mG4QzX+"
      crossorigin="anonymous"
    ></script>
  </body>
</html>
